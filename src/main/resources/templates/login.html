<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Вход - Car Messenger</title>

    <!-- Стили -->
    <link th:href="@{/css/style.css}" rel="stylesheet">

    <!-- Font Awesome для иконок -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" th:href="@{/images/car-icon.png}">
</head>
<body>
<div class="auth-container fade-in">
    <div class="text-center mb-20">
        <h1><i class="fas fa-car"></i> Car Messenger</h1>
        <p style="color: var(--gray);">Войдите в систему для доступа к автомобилям</p>
    </div>

    <!-- Уведомления -->
    <div th:if="${error}" class="notification notification-error">
        <i class="fas fa-exclamation-circle"></i>
        <span th:text="${error}"></span>
    </div>
    <div th:if="${success}" class="notification notification-success">
        <i class="fas fa-check-circle"></i>
        <span th:text="${success}"></span>
    </div>

    <!-- Форма входа -->
    <form th:action="@{/auth/login}" method="post" id="loginForm">
        <div class="form-group">
            <label class="form-label">
                <i class="fas fa-user icon"></i> Логин (Telegram @)
            </label>
            <div class="form-input-icon">
                <i class="fas fa-at"></i>
                <input type="text"
                       name="username"
                       class="form-input"
                       placeholder="@username"
                       required
                       pattern="@[a-zA-Z0-9_]{5,32}"
                       title="Telegram username должен начинаться с @ и содержать 5-32 символа">
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">
                <i class="fas fa-lock icon"></i> Пароль
            </label>
            <div class="form-input-icon">
                <i class="fas fa-key"></i>
                <input type="password"
                       name="password"
                       class="form-input"
                       placeholder="Введите пароль"
                       required
                       minlength="6">
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">
                <input type="checkbox" name="remember" id="remember">
                <span style="margin-left: 8px;">Запомнить меня</span>
            </label>
        </div>

        <button type="submit" class="btn btn-primary w-100">
            <i class="fas fa-sign-in-alt"></i> Войти в систему
        </button>
    </form>

    <div class="text-center mt-20">
        <p style="color: var(--gray); margin-bottom: 10px;">
            Нет аккаунта?
            <a th:href="@{/auth/register}" style="color: var(--primary); font-weight: 600;">
                Зарегистрироваться
            </a>
        </p>
        <p>
            <a th:href="@{/auth/recovery}"
               style="color: var(--accent); text-decoration: none; font-weight: 500;">
                <i class="fas fa-key"></i> Забыли пароль?
            </a>
        </p>
    </div>
</div>

<!-- Подключаем JavaScript -->
<script th:src="@{/js/app.js}"></script>

<script>
    // Дополнительный скрипт для этой страницы
    document.addEventListener('DOMContentLoaded', function() {
        // Анимация появления элементов
        const form = document.getElementById('loginForm');
        setTimeout(() => {
            form.classList.add('fade-in');
        }, 300);

        // Валидация формы перед отправкой
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            const username = this.querySelector('[name="username"]').value;
            if (username && !username.startsWith('@')) {
                showNotification('Telegram username должен начинаться с @', 'error');
                e.preventDefault();
                return false;
            }
            return true;
        });
    });
</script>
</body>
</html>